<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
    "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
	<constant name="struts.devMode" value="true" />
	<constant name="struts.convention.default.parent.package"
		value="default" />

	<package name="default" namespace="/" extends="struts-default,json-default">
		<result-types>
			<result-type name="tiles"
				class="org.apache.struts2.views.tiles.TilesResult" />
		</result-types>

		<interceptors>
			<interceptor name="authenticationInterceptor"
				class="edu.iiitb.facebook.interceptors.AuthenticationInterceptor">
			</interceptor>
			<interceptor-stack name="secureAccess">
				<interceptor-ref name="authenticationInterceptor" />
				<interceptor-ref name="defaultStack" />
			</interceptor-stack>
		</interceptors>

		<!-- This is for News Feeds -->
		<action name="newsfeeds"
			class="edu.iiitb.facebook.action.newsfeeds.NewsFeedsAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="tiles">newsfeeds.tiles</result>
			<result name="login">/login.jsp</result>
		</action>

		
		<!-- Start of messages related actions -->

		<!-- This is for displaying the messages page -->
		<action name="messages" method="loadMessages"
			class="edu.iiitb.facebook.action.messages.MessagesAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="tiles">messages.tiles</result>
			<result name="login">/login.jsp</result>
		</action>
		
		<!--  This is for displaying all the conversations -->
		<action name="conversation" method="loadMessages"
			class="edu.iiitb.facebook.action.messages.MessagesAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="json" />
			<result name="input" type="json" />
			<result name="login">/login.jsp</result>
		</action>

		<!-- This is for replying to a message -->
		<action name="reply" method="reply"
		    class="edu.iiitb.facebook.action.messages.ReplyAction">
		    <interceptor-ref name="secureAccess"></interceptor-ref>
		    <result name="login">/login.jsp</result>
		    <result type="json" name="success" /> 
			<result type="json" name="input" />
		</action>

		<!-- End of messages related actions -->


		<!-- This is for Posting Comments -->
		<action name="postcomment"
			class="edu.iiitb.facebook.action.comment.PostCommentsAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result type="json" name="success" />
			<result type="json" name="input" />
			<result name="login">/login.jsp</result>
		</action>

		<!-- This is for Status Update -->
		<action name="statusupdate"
			class="edu.iiitb.facebook.action.status.StatusUpdateAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result type="json" name="success" />
			<result type="json" name="input" />
			<result name="login">/login.jsp</result>
		</action>

		<!-- This is for Friend Suggestions -->
		<action name="friendsuggestions"
			class="edu.iiitb.facebook.action.friendsuggestions.FriendSuggestionsAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success">/suggestions/suggestions.jsp</result>
			<result name="login">/login.jsp</result>
		</action>
		<!-- This is for displaying Mutual Friends -->
		<action name="mutualfriends"
			class="edu.iiitb.facebook.action.friendsuggestions.MutualFriendsAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success">/suggestions/mutualfriends.jsp</result>
			<result name="login">/login.jsp</result>
			<result name="input">/suggestions/mutualfriends.jsp</result>
		</action>
		<!-- This is for adding a suggested Friend -->
		<action name="addSuggestedFriend"
			class="edu.iiitb.facebook.action.friendsuggestions.AddSuggestedFriendAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result type="json" name="success" />
			<result type="json" name="input" />
			<result name="login">/login.jsp</result>
		</action>

		<action name="profile"
			class="edu.iiitb.facebook.action.friends.FriendProfileAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="tiles">friends.tiles</result>
			<result name="error" type="tiles">error.tiles</result>
			<result name="login">/login.jsp</result>

		</action>
		<action name="addfriend"
			class="edu.iiitb.facebook.action.friends.FriendProfileAction" method="addfriendReqeust">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="redirectAction">profile?fref=${fref}</result>
			<result name="login">/login.jsp</result>

		</action>
		<action name="confirmRequest"
			class="edu.iiitb.facebook.action.friends.FriendProfileAction" method="confirmAddFriend">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="redirectAction">profile?fref=${fref}</result>
			<result name="login">/login.jsp</result>

		</action>
		<action name="rejectRequest"
			class="edu.iiitb.facebook.action.friends.FriendProfileAction" method="rejectFriend">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="redirectAction">profile?fref=${fref}</result>
			<result name="blockFriendlogin">/login.jsp</result>
		</action>

		<action name="blockfriend"
			class="edu.iiitb.facebook.action.friends.FriendProfileAction" method="blockfriend">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="redirectAction">newsfeeds</result>
			<result name="error">/login.jsp</result>
			<result name="login">/login.jsp</result>
		</action>

		<action name="login" class="edu.iiitb.facebook.action.login.LoginAction">
			<result name="success" type="redirectAction">newsfeeds</result>
			<result name="input">/login.jsp</result>
		</action>

		<action name="search" class="edu.iiitb.facebook.action.search.SearchAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="error" type="tiles">error.tiles</result>
			<result name="success" type="redirectAction">profile?fref=${fref}</result>
			<result name="login">/login.jsp</result>
		</action>

		<action name="logout" class="edu.iiitb.facebook.action.login.LogoutAction">
			<interceptor-ref name="secureAccess"></interceptor-ref>
			<result name="success" type="redirectAction">login</result>
			<result name="login" type="redirectAction">login</result>

		</action>

	</package>

</struts>
